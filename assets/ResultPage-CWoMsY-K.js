import{j as e,B as x,T as s,r as i,A as g,C as b,P as u,D as P}from"./index-CHwEwIFo.js";const m=({label:a,value:l})=>e.jsx(e.Fragment,{children:e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid",borderColor:"grey.400",borderRadius:1,padding:"16.5px 14px"},children:[e.jsx(s,{children:a}),e.jsx(s,{children:l})]})}),y=({group:a})=>e.jsx(e.Fragment,{children:e.jsx(x,{sx:{display:"flex",justifyContent:"space-between",gap:1,alignItems:"center",py:1},children:e.jsxs(s,{sx:{textAlign:"left",fontWeight:"bold",fontSize:"1.2rem",color:a.balance<0?"error.main":"text.primary"},children:[a.groupName,": CA$ ",a.balance.toFixed(2)," ",a.balance<0?" (To pay)":" (To receive)"]})})}),v=()=>{const{groups:a,expenses:l}=i.useContext(g),{total:h,valuePerPerson:f,groupsBalances:c}=i.useMemo(()=>{let n=0,r=0;const o=a.map(t=>({...t,totalPaid:0,balance:0}));o.forEach(t=>{r+=Number(t.numberOfPeople)}),l.forEach(t=>{n+=Number(t.amountPaid);const p=o.find(j=>j.groupName===t.whoPaid);p&&(p.totalPaid+=Number(t.amountPaid))});const d=r>0?n/r:0;return o.forEach(t=>{t.balance=t.totalPaid-t.numberOfPeople*d}),{total:n,valuePerPerson:d,groupsBalances:o}},[a,l]);return e.jsx(e.Fragment,{children:e.jsx(b,{maxWidth:"sm",children:e.jsxs(x,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",flexWrap:"wrap",gap:4,textAlign:"center"},children:[e.jsxs(u,{elevation:3,sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:500,width:"100%",p:4},children:[e.jsx(s,{variant:"h5",sx:{textAlign:"center"},children:"Step 3: Check the result"}),e.jsx(m,{label:"Total",value:`CAD$ ${h.toFixed(2)}`}),e.jsx(m,{label:"Value per person:",value:`CAD$ ${f.toFixed(2)}`})]}),e.jsxs(u,{elevation:3,sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:500,width:"100%",p:4,mb:4},children:[e.jsx(s,{variant:"h5",sx:{textAlign:"center"},children:"Result:"}),c.map((n,r)=>e.jsxs(i.Fragment,{children:[e.jsx(y,{group:n}),r<c.length-1&&e.jsx(P,{})]},n.id))]})]})})})};export{v as default};
